
export default function QlikObject({ app, objectId, elementId, filterChange }) {
    const [isLoading, setIsLoading] = useState(true);

    useEffect(() => {
        function renderQlikObject(objectId, elementId) {
            if (app) {
                setIsLoading(true);
                app.getObject(elementId, objectId).then(() => {
                  
                        setTimeout(() => {
                            setIsLoading(false);
                        }, 250);
                    
                }).catch((error) => {
                    console.error('Error loading Qlik object:', error);
                    setIsLoading(true);  // Eğer hata olursa, isLoaded durumunu false yap

                });
            }
        }

        renderQlikObject(objectId, elementId);
    }, [app, objectId, elementId, filterChange]); // app, qlikId veya elementId değiştiğinde çağır

    return (     
       <div id={elementId} className="qvobject" style={{ display: isLoading ? 'none' : 'flex' }}></div>           
    )
}

function formatDate(dateString) {
  // Verilen tarihi Date objesine dönüştür
  const dateObj = new Date(dateString);

  // Gün, ay, yıl değerlerini al
  const day = String(dateObj.getDate()).padStart(2, '0');
  const month = String(dateObj.getMonth() + 1).padStart(2, '0'); // Aylar 0'dan başlar
  const year = dateObj.getFullYear();

  // Formatı "dd/mm/yyyy" şeklinde oluştur
  return `${day}/${month}/${year}`;
}
